<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tidyquant with tqk • tqk</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="tidyquant with tqk">
<meta property="og:description" content="">
<meta property="og:image" content="mrchypark.github.io/tqk/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-47822682-14"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-47822682-14');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tqk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/tqk-introduce.html">tidyquant with tqk</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mrchypark/tqk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>tidyquant with tqk</h1>
                        <h4 class="author">ChanYub Park</h4>
            
            <h4 class="date">2019-03-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mrchypark/tqk/blob/master/vignettes/tqk-introduce.Rmd"><code>vignettes/tqk-introduce.Rmd</code></a></small>
      <div class="hidden name"><code>tqk-introduce.Rmd</code></div>

    </div>

    
    
<blockquote>
<p>tidyquant로 한국 주식 하려면 tqk</p>
</blockquote>
<div class="section level1">
<h1>개요</h1>
<p><code>tidyquant</code>의 <code>tq_get()</code>으로 한국의 데이터를 가져오는데 제약이 있어 시작했습니다. 우선 <code><a href="../reference/code_get.html">code_get()</a></code>으로 종목 코드를 가져오고, <code><a href="../reference/tqk_get.html">tqk_get()</a></code>으로 <code>tq_get()</code>과 같은 양식의 데이터를 확보하여 이후 <code>tidyquant</code>의 모든 기능을 한국 데이터로 활용할 수 있습니다.</p>
</div>
<div id="tidyquant------tidy" class="section level1">
<h1 class="hasAnchor">
<a href="#tidyquant------tidy" class="anchor"></a>tidyquant 소개 - 주식 데이터를 tidy하게</h1>
<p><code>tidyquant</code>는 <code>quantmod</code> 등 주식 분석을 주 목적으로 하는 중요 함수를 제공하는 중요한 패키지입니다. <code>tidy data</code> 개념을 활용한 데이터 핸들링, <code>ggplot</code>과 연계된 강한 차트 그리기, 야후를 기본으로 구글 및 각자 독자적인 데이터 소스로 부터 필요한 데이터를 손쉽게 가져오는 기능, 성능 분석 함수들을 제공하고 있습니다.</p>
<div id="--" class="section level2">
<h2 class="hasAnchor">
<a href="#--" class="anchor"></a>주가 지수 가져오기</h2>
<p><code>tidyquant</code>는 <a href="https://finance.yahoo.com">야후 파이넨스</a>에서 정보를 가져옵니다. 가져오는 데이터 소스를 바꾸고 싶으면 어떤 곳에서 가져올지 결정할 수 있는데, <code>tq_get_options()</code>는 가능한 후보를 보여줍니다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(tidyquant)) <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"tidyquant"</span>, <span class="dt">repos =</span> <span class="st">"https://cloud.r-project.org/"</span>, <span class="dt">verbose =</span> F)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyquant)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">tq_get_options</span>()</a></code></pre></div>
<pre><code>##  [1] "stock.prices"        "stock.prices.google" "stock.prices.japan" 
##  [4] "financials"          "key.ratios"          "dividends"          
##  [7] "splits"              "economic.data"       "exchange.rates"     
## [10] "metal.prices"        "quandl"              "quandl.datatable"   
## [13] "alphavantager"       "rblpapi"</code></pre>
<p>이때 코스피와 코스닥을 이르는 이름이 각각 <code>^KS11</code>와 <code>^KOSDAQ</code>입니다. 각각 한번 가져와 보겠습니다.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">tq_get</span>(<span class="st">"^KS11"</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2,710 x 7
##    date        open  high   low close volume adjusted
##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
##  1 2008-01-02 1891. 1892. 1853. 1853. 246800    1853.
##  2 2008-01-03 1834. 1858. 1822. 1853. 252800    1853.
##  3 2008-01-04 1854. 1870. 1824. 1864. 298600    1864.
##  4 2008-01-07 1816. 1841. 1814. 1831. 267800    1831.
##  5 2008-01-08 1839. 1841. 1819. 1826. 296000    1826.
##  6 2008-01-09 1802. 1844. 1794. 1844. 277200    1844.
##  7 2008-01-10 1848. 1855. 1825. 1825. 315200    1825.
##  8 2008-01-11 1845. 1847. 1776. 1782. 280200    1782.
##  9 2008-01-14 1781  1791. 1754. 1766. 249000    1766.
## 10 2008-01-15 1782. 1782. 1723. 1747. 295200    1747.
## # ... with 2,700 more rows</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">tq_get</span>(<span class="st">"^KOSDAQ"</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 7
##   date        open  high   low close volume adjusted
##   &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1 2018-11-30  697.  701.  693.  696. 537912     696.</code></pre>
<p>각 기업의 주가를 가져오려면 종목 번호를 알고 있어야 합니다. 양식은 <code>종목번호.KS</code>입니다. 종목번호는 <a href="http://dart.fss.or.kr/">전자공시시스템</a>에서 사용하는 번호입니다.</p>
<p><img src="https://user-images.githubusercontent.com/6179259/46579905-19484e00-ca55-11e8-8385-284cda1e4576.png" width="100%"></p>
<p>삼성전자 번호는 <strong>005930</strong> 이군요!</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">ss &lt;-<span class="st"> </span><span class="kw">tq_get</span>(<span class="st">"005930.KS"</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">ss</a></code></pre></div>
<pre><code>## # A tibble: 2,710 x 7
##    date        open  high   low close   volume adjusted
##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 2008-01-02 11180 11200 10840 10880 18047200    0.866
##  2 2008-01-03 10760 11060 10640 10920 19346500    0.870
##  3 2008-01-04 10920 10960 10760 10780 17997350    0.858
##  4 2008-01-07 10360 10480 10340 10380 39787200    0.827
##  5 2008-01-08 10380 10480 10320 10320 24783700    0.822
##  6 2008-01-09 10340 10580 10260 10500 23865450    0.836
##  7 2008-01-10 10440 10580 10320 10320 31551350    0.822
##  8 2008-01-11 10360 10520 10220 10320 23425150    0.822
##  9 2008-01-14 10280 10520 10280 10500 22167000    0.836
## 10 2008-01-15 10660 10820 10420 10640 40283950    0.847
## # ... with 2,700 more rows</code></pre>
<p>날짜를 지정할 수도 있습니다.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">ssdate &lt;-<span class="st"> </span><span class="kw">tq_get</span>(<span class="st">"005930.KS"</span>, <span class="dt">from=</span><span class="st">"2016-01-01"</span>, <span class="dt">to=</span><span class="st">"2016-05-05"</span>)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">ssdate</a></code></pre></div>
<pre><code>## # A tibble: 83 x 7
##    date        open  high   low close   volume adjusted
##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 2016-01-04 25200 25200 24100 24100 15346950    1168.
##  2 2016-01-05 24040 24360 23720 24160 10800100    1171.
##  3 2016-01-06 24160 24160 23360 23500 18337600    1139.
##  4 2016-01-07 23320 23660 23020 23260 14119400    1128.
##  5 2016-01-08 23260 23720 23260 23420 12888150    1135.
##  6 2016-01-11 23120 23320 22920 23040 12063850    1117.
##  7 2016-01-12 22960 23320 22880 22920 10314150    1111.
##  8 2016-01-13 23060 23180 22960 22960  7165800    1113.
##  9 2016-01-14 22620 22840 22620 22760 10451100    1103.
## 10 2016-01-15 22800 23040 22480 22640 10473200    1098.
## # ... with 73 more rows</code></pre>
<p>배당금 정보는 <code>dividends</code> 에서 확인하시면 됩니다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">ssdiv &lt;-<span class="st"> </span><span class="kw">tq_get</span>(<span class="st">"005930.KS"</span>, <span class="dt">get =</span> <span class="st">"dividends"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">ssdiv</a></code></pre></div>
<pre><code>## # A tibble: 25 x 2
##    date       dividends
##    &lt;date&gt;         &lt;dbl&gt;
##  1 2008-06-27       500
##  2 2008-12-29      5000
##  3 2009-06-29       500
##  4 2009-12-29      7500
##  5 2010-06-29      5000
##  6 2010-12-29      5000
##  7 2011-06-29       500
##  8 2011-12-28      5000
##  9 2012-06-28       500
## 10 2012-12-27      7500
## # ... with 15 more rows</code></pre>
<p><code>야후 파이넨스</code>가 데이터 소스이다 보니 모든 정보가 있다고 보기 어렵니다. 거기다 종목 번호를 일일이 찾는 것도 힘들구요. 이런 문제를 해결하기 위해서 <code>tqk</code>가 시작됬습니다.</p>
</div>
</div>
<div id="tqk-------" class="section level1">
<h1 class="hasAnchor">
<a href="#tqk-------" class="anchor"></a>tqk 소개 - 한국 주식 데이터 패키지</h1>
<div id="--" class="section level2">
<h2 class="hasAnchor">
<a href="#--" class="anchor"></a>종목 코드 가져오기</h2>
<p>본래 <code>tidyquant</code> 패키지는 symbol(ex&gt; 애플사는 AAPL)를 인자로 주식 데이터를 가져옵니다. 한국 주식은 각 종목별로 코드가 있으며 그것 때문에 코드와 종목명이 매치되있는 데이터를 확인할 수 있어야 합니다. <code>tqk</code> 패키지는 <code><a href="../reference/code_get.html">code_get()</a></code>함수를 통해 진행 가능합니다.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(remotes)) <span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"remotes"</span>, <span class="dt">verbose =</span> F)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(remotes)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">require</a></span>(tqk)) <span class="kw">install_github</span>(<span class="st">"mrchypark/tqk"</span>, <span class="dt">verbose =</span> F)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tqk)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">code &lt;-<span class="st"> </span><span class="kw"><a href="../reference/code_get.html">code_get</a></span>()</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">code</a></code></pre></div>
<pre><code>## # A tibble: 788 x 11
##    code  name  업종코드 업종  `상장주식수(주)` `자본금(원)` `액면가(원)`
##    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;        &lt;chr&gt;       
##  1 0955~ AJ네트~ 147603   산업용 ~ 46,822,295       46,822,295,~ 1,000       
##  2 0684~ AJ렌터~ 147601   운송장비~ 22,146,300       11,073,150,~ 500         
##  3 0068~ AK홀딩~ 116409   기타 금~ 13,247,561       66,237,805,~ 5,000       
##  4 0274~ BGF   116409   기타 금~ 95,369,179       95,369,179,~ 1,000       
##  5 2823~ BGF리~ 074701   종합 소~ 17,283,906       17,283,906,~ 1,000       
##  6 1389~ BNK금~ 116409   기타 금~ 325,935,246      1,629,676,2~ 5,000       
##  7 0014~ BYC   031401   봉제의복~ 624,615          4,200,000,0~ 5,000       
##  8 0010~ CJ    116409   기타 금~ 29,176,998       157,914,810~ 5,000       
##  9 0791~ CJ C~ 105901   영화, ~ 21,161,313       10,580,656,~ 500         
## 10 0001~ CJ대한~ 084903   도로 화~ 22,812,344       114,061,720~ 5,000       
## # ... with 778 more rows, and 4 more variables: 통화구분 &lt;chr&gt;,
## #   대표전화 &lt;chr&gt;, 주소 &lt;chr&gt;, market &lt;chr&gt;</code></pre>
</div>
<div id="--" class="section level2">
<h2 class="hasAnchor">
<a href="#--" class="anchor"></a>주식 데이터 가져오기</h2>
<p><code><a href="../reference/tqk_get.html">tqk_get()</a></code>은 종목 코드로 데이터를 가져오도록 만들었습니다.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">ss_prices &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/code_get.html">code_get</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(name <span class="op">==</span><span class="st"> "삼성전자"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(code) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/tqk_get.html">tqk_get</a></span>(<span class="dt">from =</span> <span class="st">"2018-05-01"</span>)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6"></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">ss_prices</a></code></pre></div>
<pre><code>## # A tibble: 206 x 7
##    date          open    high     low   close   volume adjusted
##    &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;int&gt;    &lt;dbl&gt;
##  1 2018-05-02 2650000 2650000 2650000 2650000        0    53000
##  2 2018-05-03 2650000 2650000 2650000 2650000        0    53000
##  3 2018-05-04   53000   53900   51800   51900 39565391    51900
##  4 2018-05-08   52600   53200   51900   52600 23104720    52600
##  5 2018-05-09   52600   52800   50900   50900 16128305    50900
##  6 2018-05-10   51700   51700   50600   51600 13905263    51600
##  7 2018-05-11   52000   52200   51200   51300 10314997    51300
##  8 2018-05-14   51000   51100   49900   50100 14909272    50100
##  9 2018-05-15   50200   50400   49100   49200 18709146    49200
## 10 2018-05-16   49200   50200   49150   49850 15918683    49850
## # ... with 196 more rows</code></pre>
<p>데이터는 주요 사이트인 n사, d사, p사 를 모두 대응하는 것을 목표로 하고 있고, 현재 d사 기본, p사로 작성되어 있습니다.</p>
<div id="quandl" class="section level3">
<h3 class="hasAnchor">
<a href="#quandl" class="anchor"></a>Quandl</h3>
<p><a href="https://www.quandl.com/">Quandl</a>은 방대한 양의 경제, 주식에 대한 정보를 가지고 서비스하는 데이터 판매 기업입니다. <code>Quandl</code>이라는 자체 패키지만을 사용해도 되고, <code>tidyquant</code>가 내장하고 있어서 같이 사용해도 됩니다.</p>
</div>
</div>
<div id="tidyverse----" class="section level2">
<h2 class="hasAnchor">
<a href="#tidyverse----" class="anchor"></a>tidyverse와 함께 사용하는 시계열 데이터</h2>
<p>그 동안의 주식관련 패키지들은 파이프 연산자 <code>%&gt;%</code>와 함꼐 사용하지 못했는데, <code>tidyquant</code>는 그런 문제를 해결하였습니다. 아래 2가지 중요한 함수를 추가함으로써 <code>dplyr</code>과 <code>tidyr</code>의 함수와 함께 사용할 수 있게 되었습니다.</p>
<ul>
<li>
<code>tq_transmute()</code>: 계산된 내용의 컬럼만으로 데이터를 구성합니다.</li>
<li>
<code>tq_mutate()</code>: 데이터에 계산된 내용의 컬럼을 추가합니다.</li>
</ul>
</div>
<div id="tq_---" class="section level2">
<h2 class="hasAnchor">
<a href="#tq_---" class="anchor"></a><code>tq_</code>에서 계산 가능한 함수들</h2>
<p><code>tq_transmute_fun_options()</code> 함수는 각 참고 패키지에서 활용할 수 있는 함수의 리스트를 보여줍니다. 모두 <code>zoo</code>, <code>xts</code>, <code>quantmod</code>, <code>TTR</code>, <code>PerformanceAnalytics</code>의 5개 패키지내의 함수를 지원합니다.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">tq_transmute_fun_options</span>() <span class="op">%&gt;%</span><span class="st"> </span>str</a></code></pre></div>
<pre><code>## List of 5
##  $ zoo                 : chr [1:14] "rollapply" "rollapplyr" "rollmax" "rollmax.default" ...
##  $ xts                 : chr [1:27] "apply.daily" "apply.monthly" "apply.quarterly" "apply.weekly" ...
##  $ quantmod            : chr [1:25] "allReturns" "annualReturn" "ClCl" "dailyReturn" ...
##  $ TTR                 : chr [1:62] "adjRatios" "ADX" "ALMA" "aroon" ...
##  $ PerformanceAnalytics: chr [1:7] "Return.annualized" "Return.annualized.excess" "Return.clean" "Return.cumulative" ...</code></pre>
<div id="zoo-" class="section level3">
<h3 class="hasAnchor">
<a href="#zoo-" class="anchor"></a>zoo 함수</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">tq_transmute_fun_options</span>()<span class="op">$</span>zoo</a></code></pre></div>
<pre><code>##  [1] "rollapply"          "rollapplyr"         "rollmax"           
##  [4] "rollmax.default"    "rollmaxr"           "rollmean"          
##  [7] "rollmean.default"   "rollmeanr"          "rollmedian"        
## [10] "rollmedian.default" "rollmedianr"        "rollsum"           
## [13] "rollsum.default"    "rollsumr"</code></pre>
<ul>
<li>롤링관련 함수 :
<ul>
<li>롤링 마진에 기능을 적용하는 일반적인 기능.</li>
<li>form :<code>rollapply(data, width, FUN, ..., by = 1, by.column = TRUE, fill = if (na.pad) NA, na.pad = FALSE, partial = FALSE, align = c("center", "left", "right"), coredata = TRUE)</code>.</li>
<li>옵션에는 <code>rollmax</code>,<code>rollmean</code>,<code>rollmedian</code>,<code>rollsum</code> 등이 있습니다.</li>
</ul>
</li>
</ul>
</div>
<div id="xts-" class="section level3">
<h3 class="hasAnchor">
<a href="#xts-" class="anchor"></a>xts 함수</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">tq_transmute_fun_options</span>()<span class="op">$</span>xts</a></code></pre></div>
<pre><code>##  [1] "apply.daily"     "apply.monthly"   "apply.quarterly"
##  [4] "apply.weekly"    "apply.yearly"    "diff.xts"       
##  [7] "lag.xts"         "period.apply"    "period.max"     
## [10] "period.min"      "period.prod"     "period.sum"     
## [13] "periodicity"     "to.daily"        "to.hourly"      
## [16] "to.minutes"      "to.minutes10"    "to.minutes15"   
## [19] "to.minutes3"     "to.minutes30"    "to.minutes5"    
## [22] "to.monthly"      "to.period"       "to.quarterly"   
## [25] "to.weekly"       "to.yearly"       "to_period"</code></pre>
<ul>
<li>기간 적용 기능 :
<ul>
<li>기능을 시간 세그먼트 (예 : <code>max</code>, <code>min</code>, <code>mean</code> 등)에 적용합니다.</li>
<li>양식 :<code>apply.daily (x, FUN, ...)</code>.</li>
<li>옵션은<code>apply.daily</code>,<code>weekly</code>,<code>monthly</code>,<code>quarterly</code>,<code>yearly</code>를 포함합니다.</li>
</ul>
</li>
<li>기간 기능 :
<ul>
<li>시계열을 낮은 주기성의 시계열로 변환합니다 (예 : 매일 매일의 주기성으로 변환).</li>
<li>형식 :<code>to.period (x, period = 'months', k = 1, indexAt, name = NULL, OHLC = TRUE, ...)</code>.</li>
<li>옵션에는<code>to.minutes</code>,<code>hourly</code>,<code>daily</code>,<code>weekly</code>,<code>monthly</code>,<code>quarterly</code>,<code>yearly</code>가 포함됩니다.</li>
<li>
<strong>참고</strong> :<code>to.period</code>와<code>to.monthly</code> (<code>to.weekly</code>,<code>to.quarterly</code> 등) 양식의 리턴 구조는 다릅니다. <code>to.period</code>는 날짜를 반환하고, to.months는 MON YYYY 문자를 반환합니다. <code>lubridate</code>를 통해 시계열로 작업하고 싶다면<code>to.period</code>를 사용하는 것이 가장 좋습니다.</li>
</ul>
</li>
</ul>
</div>
<div id="quantmod-" class="section level3">
<h3 class="hasAnchor">
<a href="#quantmod-" class="anchor"></a>quantmod 함수</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">tq_transmute_fun_options</span>()<span class="op">$</span>quantmod</a></code></pre></div>
<pre><code>##  [1] "allReturns"      "annualReturn"    "ClCl"           
##  [4] "dailyReturn"     "Delt"            "HiCl"           
##  [7] "Lag"             "LoCl"            "LoHi"           
## [10] "monthlyReturn"   "Next"            "OpCl"           
## [13] "OpHi"            "OpLo"            "OpOp"           
## [16] "periodReturn"    "quarterlyReturn" "seriesAccel"    
## [19] "seriesDecel"     "seriesDecr"      "seriesHi"       
## [22] "seriesIncr"      "seriesLo"        "weeklyReturn"   
## [25] "yearlyReturn"</code></pre>
<ul>
<li>비율 변경 (Delt) 및 Lag 기능
<ul>
<li>Delt :<code>Delt (x1, x2 = NULL, k = 0, type = c ( "arithmetic", "log"))</code>
<ul>
<li>Delt의 변형 : ClCl, HiCl, LoCl, LoHi, OpCl, OpHi, OpLo, OpOp</li>
<li>양식 :<code>Opcl (OHLC)</code>
</li>
</ul>
</li>
<li>Lag :<code>Lag(x, k = 1)</code>/ Next :<code>Next(x, k = 1)</code>(<code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">dplyr :: lag</a></code>과<code><a href="https://dplyr.tidyverse.org/reference/lead-lag.html">dplyr :: lead</a></code>도 사용할 수 있습니다)</li>
</ul>
</li>
<li>기간 반환 함수 :
<ul>
<li>매일, 매주, 매월, 분기 별 및 연간을 포함하는 다양한주기에 대한 산술 또는 로그 반환을 가져옵니다.</li>
<li>형식 :<code>periodReturn (x, period = 'monthly', 부분 집합 = NULL, type = 'arithmetic', leading = TRUE, ...)</code>
</li>
</ul>
</li>
<li>시리즈 기능 :
<ul>
<li>계열을 설명하는 반환 값. 옵션에는 증감, 가감 및 고저 설명이 포함됩니다.</li>
<li>양식 :<code>seriesHi (x)</code>,<code>seriesIncr (x, thresh = 0, diff. = 1L)</code>,<code>seriesAccel (x)</code>
</li>
</ul>
</li>
</ul>
</div>
<div id="ttr-" class="section level3">
<h3 class="hasAnchor">
<a href="#ttr-" class="anchor"></a>TTR 함수</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">tq_transmute_fun_options</span>()<span class="op">$</span>TTR</a></code></pre></div>
<pre><code>##  [1] "adjRatios"          "ADX"                "ALMA"              
##  [4] "aroon"              "ATR"                "BBands"            
##  [7] "CCI"                "chaikinAD"          "chaikinVolatility" 
## [10] "CLV"                "CMF"                "CMO"               
## [13] "DEMA"               "DonchianChannel"    "DPO"               
## [16] "DVI"                "EMA"                "EMV"               
## [19] "EVWMA"              "GMMA"               "growth"            
## [22] "HMA"                "KST"                "lags"              
## [25] "MACD"               "MFI"                "momentum"          
## [28] "OBV"                "PBands"             "ROC"               
## [31] "rollSFM"            "RSI"                "runCor"            
## [34] "runCov"             "runMAD"             "runMax"            
## [37] "runMean"            "runMedian"          "runMin"            
## [40] "runPercentRank"     "runSD"              "runSum"            
## [43] "runVar"             "SAR"                "SMA"               
## [46] "SMI"                "SNR"                "stoch"             
## [49] "TDI"                "TRIX"               "ultimateOscillator"
## [52] "VHF"                "VMA"                "volatility"        
## [55] "VWAP"               "VWMA"               "wilderSum"         
## [58] "williamsAD"         "WMA"                "WPR"               
## [61] "ZigZag"             "ZLEMA"</code></pre>
<ul>
<li>웰즈 와일더의 방향 운동 지수 : *<code>ADX (HLC, n = 14, maType, ...)</code>
</li>
<li>볼린저 밴드 :
<ul>
<li>BBands (HLC, n = 20, maType, sd = 2, …) : 볼린저 밴드</li>
</ul>
</li>
<li>변화율 / 운동량 : <em><code>ROC (x, n = 1, type = c ( "연속", "이산"), na.pad = TRUE)</code>: 변화율 </em><code>운동량 (x, n = 1, na.pad = TRUE)</code>: 운동량</li>
<li>이동 평균 (maType) : <em><code>SMA (x, n = 10, ...)</code>: 단순 이동 평균 </em><code>EMA (x, n = 10, wilder = FALSE, ratio = NULL, ...)</code>: 지수 이동 평균
<ul>
<li>DEMA (x, n = 10, v = 1, wilder = FALSE, ratio = NULL)`: 이중 지수 이동 평균</li>
<li>WMA (x, n = 10, wts = 1 : n, …)`: 가중 이동 평균</li>
<li>EVWMA (가격, 수량, n = 10, …) : 탄성, 체중 이동 평균 <em><code>ZLEMA (x, n = 10, 비율 = NULL, ...)</code>: Zero Lag Exponential Moving Average </em><code>VWAP (가격, 물량, n = 10, ...)</code>: 물량 가중 평균 가격</li>
<li>VMA (x, w, 비율 = 1, …) : 가변 길이 이동 평균 <em><code>HMA (x, n = 20, ...)</code>: 선체 이동 평균 </em><code>ALMA (x, n = 9, offset = 0.85, sigma = 6, ...)</code>: Arnaud Legoux 이사 평균</li>
</ul>
</li>
<li>MACD Oscillator : MACD (x, nFast = 12, nSlow = 26, nSig = 9, maType, percent = TRUE, …)</li>
<li>상대 강도 지수 : *<code>RSI (가격, n = 14, maType, ...)</code>
</li>
<li>runFun : <em><code>runSum (x, n = 10, cumulative = FALSE)</code>: n- 기간 이동 윈도우에 대한 합계를 반환합니다. </em><code>runMin (x, n = 10, cumulative = FALSE)</code>: n- 기간 이동 윈도우에 대한 최소값을 반환합니다. <em><code>runMax (x, n = 10, cumulative = FALSE)</code>: n- 기간 이동 윈도우에 대해 최대 값을 반환합니다. </em><code>runMean (x, n = 10, cumulative = FALSE)</code>: n-period 이동 윈도우를 의미합니다. *<code>runMedian (x, n = 10, non.unique = "mean", cumulative = FALSE)</code>: n-period 이동 윈도우에 대한 중앙값을 반환합니다.
<ul>
<li>
<code>runCov (x, y, n = 10, use = "all.obs", sample = TRUE, 누적 = FALSE)</code>: n-period 이동 윈도우에 대한 공분산을 반환합니다. <em><code>runCor (x, y, n = 10, use = "all.obs", sample = TRUE, 누적 = FALSE)</code>: n-period 이동 윈도우에 대한 상관 관계를 반환합니다. </em><code>runVar (x, y = NULL, n = 10, 샘플 = TRUE, 누적 = FALSE)</code>: n- 기간 이동 윈도우에 대한 분산을 반환합니다. <em><code>runSD (x, n = 10, 샘플 = TRUE, 누적 = FALSE)</code>: n- 기간 이동 윈도우에 대한 표준 편차를 반환합니다. <code>runMAD (x, n = 10, center = NULL, stat = "중간 값", 상수 = 1.4826, non.unique = "평균", cumulative = FALSE)</code>n 기간 이동에 대한 중간 / 평균 절대 편차를 반환합니다. 창문. </em><code>wilderSum (x, n = 10)</code>: n- 기간 이동 윈도우에 대해 Welles Wilder 스타일 가중치 합계를 되 돌린다.</li>
</ul>
</li>
<li>Stochastic Oscillator / Stochastic Momentum Index : Stochastic Oscillator (HLC, nFastK = 14, nFastD = 3, nSlowD = 3, maType, bounded = TRUE, smooth = 1, …)
<ul>
<li>SMI (HLC, n = 13, nFast = 2, nSlow = 25, nSig = 9, maType, bounded = TRUE, …) : 확률 모멘텀 지수</li>
</ul>
</li>
</ul>
</div>
<div id="performanceanalytics-" class="section level3">
<h3 class="hasAnchor">
<a href="#performanceanalytics-" class="anchor"></a>PerformanceAnalytics 함수</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">tq_transmute_fun_options</span>()<span class="op">$</span>PerformanceAnalytics</a></code></pre></div>
<pre><code>## [1] "Return.annualized"        "Return.annualized.excess"
## [3] "Return.clean"             "Return.cumulative"       
## [5] "Return.excess"            "Return.Geltner"          
## [7] "zerofill"</code></pre>
<p><em><code>Return.annualized</code> 및<code>Return.annualized.excess</code> : 기간 반환을 취하여 연간 수익으로 통합합니다. </em><code>Return.clean</code> : 반환 값에서 특이 값을 제거합니다. <em><code>Return.excess</code> : 무위험 이자율을 초과하는 수익률로 수익률에서 무위험 이자율을 제거합니다. </em><code>zerofill</code> : ’NA’값을 0으로 대체하는 데 사용됩니다.</p>
</div>
</div>
<div id="ggplot2---" class="section level2">
<h2 class="hasAnchor">
<a href="#ggplot2---" class="anchor"></a>ggplot2와 연계된 차트 그리기</h2>
<p><code>ggplot2</code> 차트를 그리는데 <code>R</code>에서 가장 유명한 패키지 입니다. <code>gg</code>는 <a href="http://www.springer.com/us/book/9780387245447">Grammar of Graphics</a>의 줄임말로 그림을 생성하는 것에 대한 규칙을 제안하고 있습니다. <code>tidyquant</code>는 <code>ggplot2</code>에 더해 아래와 같은 기능을 추가로 제공합니다.</p>
<ul>
<li>
<strong>차트 종류</strong> : 두 개의 차트 타입 시각화는<code>geom_barchart</code>와<code>geom_candlestick</code>을 사용하여 가능합니다.</li>
<li>
<strong>이동 평균</strong> : ’geom_ma’를 사용하여 7 개의 이동 평균 시각화를 사용할 수 있습니다.</li>
<li>
<strong>Bollinger Bands</strong> : Bollinger 밴드는 ’geom_bbands’를 사용하여 시각화 할 수 있습니다. BBand 이동 평균은 이동 평균에서 사용할 수있는 7 가지 중 하나 일 수 있습니다.</li>
<li>
<strong>날짜 범위 확대</strong> : 차트의 특정 영역을 확대 할 때 데이터 손실을 방지하는 두 가지<code>coord</code> 함수 (<code>coord_x_date</code> 및<code>coord_x_datetime</code>)를 사용할 수 있습니다. 이것은 이동 평균 및 Bollinger 밴드 기하학을 사용할 때 중요합니다.</li>
</ul>
<div class="section level3">
<h3>살펴보기</h3>
<p><code>tqk_get</code>를 이용해서 사용할 데이터를 가져옵니다. 내장 데이터인 <code>SHANK</code>과 삼성, 네이버를 예시로 사용하겠습니다.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tqk)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(SHANK)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"></a>
<a class="sourceLine" id="cb29-4" data-line-number="4">SS &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tqk_get.html">tqk_get</a></span>(code[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">grep</a></span>(<span class="st">"^삼성전자$"</span>,code<span class="op">$</span>name),<span class="dv">1</span>], <span class="dt">to =</span> <span class="st">"2016-12-31"</span>)</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">NVR &lt;-<span class="st"> </span><span class="kw"><a href="../reference/tqk_get.html">tqk_get</a></span>(code[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/grep">grep</a></span>(<span class="st">"NAVER"</span>,code<span class="op">$</span>name),<span class="dv">1</span>], <span class="dt">to =</span> <span class="st">"2016-12-31"</span>)</a></code></pre></div>
<p>’end` 매개 변수는 예제 전체에서 날짜 제한을 설정할 때 사용됩니다.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">end &lt;-<span class="st"> </span><span class="kw">as_date</span>(<span class="st">"2016-12-31"</span>)</a></code></pre></div>
</div>
</div>
<div id="-" class="section level2">
<h2 class="hasAnchor">
<a href="#-" class="anchor"></a>차트 종류</h2>
<ul>
<li>
<a href="http://www.investopedia.com/terms/b/barchart.asp">Bar Chart</a>: <code>geom_barchart</code>을 사용합니다.</li>
<li>
<a href="http://www.investopedia.com/terms/c/candlestick.asp">Candlestick Chart</a>: <code>geom_candlestick</code>을 사용합니다.</li>
</ul>
<div id="-" class="section level3">
<h3 class="hasAnchor">
<a href="#-" class="anchor"></a>라인 차트</h3>
<p><code>tidyquant</code>의 <code>geom_</code>함수를 사용하여 가로 막대형 차트와 촛대형 차트를 시각화하기 전에 단순한 선 차트로 주가를 시각화하여 <code>그래픽 문법</code>을 확인해보겠습니다. 이것은<code>ggplot2</code> 패키지의<code>geom_line</code>을 사용하여 이루어집니다. 주식 데이터로 시작하고 파이프 연산자 (<code>%&gt; %</code>)를 사용하여<code>ggplot ()</code>함수로 보냅니다.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb31-4" data-line-number="4"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Line Chart"</span>, <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-17-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="-" class="section level3">
<h3 class="hasAnchor">
<a href="#-" class="anchor"></a>바 차트</h3>
<p>바 차트는 <code>geom_line</code>를 <code>geom_barchart</code>로 바꾸는 걸로 해결됩니다. <code>aes()</code>내의 내용을 의미에 맞게 조정하는 것으로 바 차트를 그리는 것이 끝납니다.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_barchart</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb32-4" data-line-number="4"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Bar Chart"</span>, <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-5" data-line-number="5"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-18-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>우리는<code>coord_x_date</code>를 사용하여 특정 섹션을 확대 / 축소합니다.이 섹션에는<code>xlim</code> 및<code>ylim</code> 인수가<code><a href="https://www.rdocumentation.org/packages/base/topics/c">c (start, end)</a></code>로 지정되어 차트의 특정 영역에 초점을 맞 춥니 다. <code>xlim</code>의 경우 우리는<code>lubridate</code>를 사용하여 문자 날짜를 날짜 클래스로 변환 한 다음<code>weeks ()</code>함수를 사용하여 6 주를 뺍니다. <code>ylim</code>의 경우 가격을 100에서 120까지 확대합니다.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_barchart</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Bar Chart"</span>, </a>
<a class="sourceLine" id="cb33-5" data-line-number="5">         <span class="dt">subtitle =</span> <span class="st">"Zoomed in using coord_x_date"</span>,</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-7" data-line-number="7"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">6</span>), end),</a>
<a class="sourceLine" id="cb33-8" data-line-number="8">                 <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1600000</span>, <span class="dv">1800000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-9" data-line-number="9"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-19-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>색상은<code>color_up</code> 및<code>color_down</code> 인수를 사용하여 수정할 수 있으며<code>size</code>와 같은 매개 변수를 사용하여 모양을 제어 할 수 있습니다.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_barchart</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close),</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">                     <span class="dt">color_up =</span> <span class="st">"darkgreen"</span>, <span class="dt">color_down =</span> <span class="st">"darkred"</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Bar Chart"</span>, </a>
<a class="sourceLine" id="cb34-6" data-line-number="6">         <span class="dt">subtitle =</span> <span class="st">"Zoomed in, Experimenting with Formatting"</span>,</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-8" data-line-number="8"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">6</span>), end),</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">                 <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1600000</span>, <span class="dv">1800000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-10" data-line-number="10"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-20-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="-" class="section level3">
<h3 class="hasAnchor">
<a href="#-" class="anchor"></a>캔들 차트</h3>
<p>캔들 차트 또한 바 차트를 그리는 것과 거의 같습니다.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_candlestick</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Candlestick Chart"</span>, <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-21-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>색상은<code>color_up</code>과<code>color_down</code>을 사용하여 선 색상을 조절할 수 있고, <code>fill_up</code>과<code>fill_down</code>은 사각형을 채 웁니다.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_candlestick</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close),</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">                        <span class="dt">color_up =</span> <span class="st">"darkgreen"</span>, <span class="dt">color_down =</span> <span class="st">"darkred"</span>, </a>
<a class="sourceLine" id="cb36-5" data-line-number="5">                        <span class="dt">fill_up  =</span> <span class="st">"darkgreen"</span>, <span class="dt">fill_down  =</span> <span class="st">"darkred"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb36-6" data-line-number="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Candlestick Chart"</span>, </a>
<a class="sourceLine" id="cb36-7" data-line-number="7">         <span class="dt">subtitle =</span> <span class="st">"Zoomed in, Experimenting with Formatting"</span>,</a>
<a class="sourceLine" id="cb36-8" data-line-number="8">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-9" data-line-number="9"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">6</span>), end),</a>
<a class="sourceLine" id="cb36-10" data-line-number="10">                 <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1600000</span>, <span class="dv">1800000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-11" data-line-number="11"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-22-1.png" width="95%" style="display: block; margin: auto;"></p>
<p><a class="anchor" id="mult-chart"></a></p>
</div>
<div id="--" class="section level3">
<h3 class="hasAnchor">
<a href="#--" class="anchor"></a>여러개의 차트를 그리기</h3>
<p><code>facet_wrap</code>을 사용하여 동시에 여러 주식을 시각화 할 수 있습니다. <code>ggplot ()</code>의 <code>aes()</code>에<code>group</code>을 추가하고<code>ggplot</code> 워크 플로우의 끝에서<code>facet_wrap()</code>함수와 결합함으로써 네 개의 “FANG”주식을 동시에 모두 볼 수 있습니다.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">start &lt;-<span class="st"> </span>end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb37-2" data-line-number="2">SHANK <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(date <span class="op">&gt;=</span><span class="st"> </span>start <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">15</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close, <span class="dt">group =</span> symbol)) <span class="op">+</span></a>
<a class="sourceLine" id="cb37-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_candlestick</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SHANK Candlestick Chart"</span>, </a>
<a class="sourceLine" id="cb37-7" data-line-number="7">         <span class="dt">subtitle =</span> <span class="st">"Experimenting with Mulitple Stocks"</span>,</a>
<a class="sourceLine" id="cb37-8" data-line-number="8">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-9" data-line-number="9"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(start, end)) <span class="op">+</span></a>
<a class="sourceLine" id="cb37-10" data-line-number="10"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>symbol, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">scale =</span> <span class="st">"free_y"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-11" data-line-number="11"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-23-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="-" class="section level2">
<h2 class="hasAnchor">
<a href="#-" class="anchor"></a>트랜드 시각화</h2>
<p><a href="http://www.investopedia.com/terms/m/movingaverage.asp">Moving averages</a> are critical to evaluating time-series trends. <code>tidyquant</code> includes geoms to enable “rapid prototyping” to quickly visualize signals using moving averages and Bollinger bands.</p>
<p><a class="anchor" id="mavg"></a></p>
<div id="-" class="section level3">
<h3 class="hasAnchor">
<a href="#-" class="anchor"></a>이동 평균</h3>
<p><code>tidyquant</code>에서는 다양한 이동평균 함수를 제공합니다.</p>
<ul>
<li><strong><a href="http://www.investopedia.com/terms/s/sma.asp">Simple moving averages (SMA)</a></strong></li>
<li><strong><a href="http://www.investopedia.com/terms/e/ema.asp">Exponential moving averages (EMA)</a></strong></li>
<li><strong><a href="http://www.investopedia.com/ask/answers/071414/whats-difference-between-moving-average-and-weighted-moving-average.asp">Weighted moving averages (WMA)</a></strong></li>
<li><strong><a href="http://www.investopedia.com/articles/trading/10/double-exponential-moving-average.asp">Double exponential moving averages (DEMA)</a></strong></li>
<li><strong><a href="https://en.wikipedia.org/wiki/Zero_lag_exponential_moving_average">Zero-lag exponential moving averages (ZLEMA)</a></strong></li>
<li>
<strong><a href="http://www.investopedia.com/articles/trading/11/trading-with-vwap-mvwap.asp">Volume-weighted moving averages (VWMA)</a></strong> (also known as VWAP)</li>
<li>
<strong><a href="http://www.investopedia.com/articles/trading/11/trading-with-vwap-mvwap.asp">Elastic, volume-weighted moving averages (EVWMA)</a></strong> (also known as MVWAP)</li>
</ul>
<p>이동 평균은<code>geom_ma</code> 함수로 차트에 추가 된 레이어로 적용됩니다. 기하 구조는<code>TTR</code> 패키지에서<code>SMA</code>,<code>EMA</code>,<code>WMA</code>,<code>DEMA</code>,<code>ZLEMA</code>,<code>VWMA</code>,<code>EVWMA</code>와 같은 기본 이동 평균 함수의 래퍼입니다.</p>
</div>
<div id="example-1-50200-----" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-50200-----" class="anchor"></a>Example 1: 50일/200일 단순 이동 평균 차트 작성</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_candlestick</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_ma</span>(<span class="dt">ma_fun =</span> SMA, <span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">linetype =</span> <span class="dv">5</span>, <span class="dt">size =</span> <span class="fl">1.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb38-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_ma</span>(<span class="dt">ma_fun =</span> SMA, <span class="dt">n =</span> <span class="dv">200</span>, <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">size =</span> <span class="fl">1.25</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-6" data-line-number="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Candlestick Chart"</span>, </a>
<a class="sourceLine" id="cb38-7" data-line-number="7">         <span class="dt">subtitle =</span> <span class="st">"50 and 200-Day SMA"</span>, </a>
<a class="sourceLine" id="cb38-8" data-line-number="8">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-9" data-line-number="9"><span class="st">         </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">24</span>), end),</a>
<a class="sourceLine" id="cb38-10" data-line-number="10">                      <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1500000</span>, <span class="dv">1850000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-11" data-line-number="11"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-24-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="example-2----" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2----" class="anchor"></a>Example 2: 지수 이동 평균 차트</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_barchart</span>(<span class="kw">aes</span>(<span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_ma</span>(<span class="dt">ma_fun =</span> EMA, <span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">wilder =</span> <span class="ot">TRUE</span>, <span class="dt">linetype =</span> <span class="dv">5</span>, <span class="dt">size =</span> <span class="fl">1.25</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_ma</span>(<span class="dt">ma_fun =</span> EMA, <span class="dt">n =</span> <span class="dv">200</span>, <span class="dt">wilder =</span> <span class="ot">TRUE</span>, <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">size =</span> <span class="fl">1.25</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-6" data-line-number="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Bar Chart"</span>, </a>
<a class="sourceLine" id="cb39-7" data-line-number="7">         <span class="dt">subtitle =</span> <span class="st">"50 and 200-Day EMA"</span>, </a>
<a class="sourceLine" id="cb39-8" data-line-number="8">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-9" data-line-number="9"><span class="st">         </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">24</span>), end),</a>
<a class="sourceLine" id="cb39-10" data-line-number="10">                      <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1500000</span>, <span class="dv">1850000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-11" data-line-number="11"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-25-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="-" class="section level2">
<h2 class="hasAnchor">
<a href="#-" class="anchor"></a>볼린저 밴드</h2>
<p>[Bollinger Bands] <a href="https://en.wikipedia.org/wiki/Bollinger_Bands)%EB%8A%94" class="uri">https://en.wikipedia.org/wiki/Bollinger_Bands)는</a> 이동 평균(일반적으로 상하 2SD) 주위의 범위를 플로팅하여 변동성을 시각화하는 데 사용됩니다. 그것들은 이동 평균을 사용하기 때문에,<code>geom_bbands</code> 함수는<code>geom_ma</code>와 거의 동일하게 작동합니다. 동일한 7 개의 이동 평균이 호환됩니다. 가장 큰 차이점은 기본적으로 2 인 표준 편차 인<code>sd</code> 인수와 밴드를 계산하는 데 필요한 ‘high’, ’low’및 ’close’를 <code>aes()</code>에 추가하는 것입니다.</p>
<div id="example-1-sma--bbands-" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-sma--bbands-" class="anchor"></a>Example 1: SMA를 사용하여 BBands 적용</h3>
<p>간단한 이동 평균을 사용하여 Bollinger Bands를 추가하는 기본 예제를 살펴 보겠습니다.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close, <span class="dt">open =</span> open,</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">               <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_candlestick</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb40-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_bbands</span>(<span class="dt">ma_fun =</span> SMA, <span class="dt">sd =</span> <span class="dv">2</span>, <span class="dt">n =</span> <span class="dv">20</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb40-6" data-line-number="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Candlestick Chart"</span>, </a>
<a class="sourceLine" id="cb40-7" data-line-number="7">         <span class="dt">subtitle =</span> <span class="st">"BBands with SMA Applied"</span>, </a>
<a class="sourceLine" id="cb40-8" data-line-number="8">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-9" data-line-number="9"><span class="st">         </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">24</span>), end),</a>
<a class="sourceLine" id="cb40-10" data-line-number="10">                      <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1500000</span>, <span class="dv">1850000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb40-11" data-line-number="11"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-26-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="example-2-bollinger-bands--" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-bollinger-bands--" class="anchor"></a>Example 2: Bollinger Bands의 모양 바꾸기</h3>
<p>모양은<code>color_ma</code>,<code>color_bands</code>,<code>alpha</code>,<code>fill</code> 인자를 사용하여 수정할 수 있습니다. BBands에 새로운 서식을 적용한 Example 1과 같은 그림이 있습니다.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">SS <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close, <span class="dt">open =</span> open,</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">               <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close)) <span class="op">+</span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_candlestick</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb41-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_bbands</span>(<span class="dt">ma_fun =</span> SMA, <span class="dt">sd =</span> <span class="dv">2</span>, <span class="dt">n =</span> <span class="dv">20</span>, </a>
<a class="sourceLine" id="cb41-6" data-line-number="6">                <span class="dt">linetype =</span> <span class="dv">4</span>, <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">alpha =</span> <span class="fl">0.2</span>, </a>
<a class="sourceLine" id="cb41-7" data-line-number="7">                <span class="dt">fill        =</span> <span class="kw">palette_light</span>()[[<span class="dv">1</span>]], </a>
<a class="sourceLine" id="cb41-8" data-line-number="8">                <span class="dt">color_bands =</span> <span class="kw">palette_light</span>()[[<span class="dv">1</span>]], </a>
<a class="sourceLine" id="cb41-9" data-line-number="9">                <span class="dt">color_ma    =</span> <span class="kw">palette_light</span>()[[<span class="dv">2</span>]]) <span class="op">+</span></a>
<a class="sourceLine" id="cb41-10" data-line-number="10"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SamSung Candlestick Chart"</span>, </a>
<a class="sourceLine" id="cb41-11" data-line-number="11">         <span class="dt">subtitle =</span> <span class="st">"BBands with SMA Applied, Experimenting with Formatting"</span>, </a>
<a class="sourceLine" id="cb41-12" data-line-number="12">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb41-13" data-line-number="13"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">24</span>), end),</a>
<a class="sourceLine" id="cb41-14" data-line-number="14">                 <span class="dt">ylim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1500000</span>, <span class="dv">1850000</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb41-15" data-line-number="15"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-27-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="example-3---bbands-" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3---bbands-" class="anchor"></a>Example 3: 여러 주식에 BBands 추가</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">start &lt;-<span class="st"> </span>end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">12</span>)</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">SHANK <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(date <span class="op">&gt;=</span><span class="st"> </span>start <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="dv">20</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-4" data-line-number="4"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close, </a>
<a class="sourceLine" id="cb42-5" data-line-number="5">               <span class="dt">open =</span> open, <span class="dt">high =</span> high, <span class="dt">low =</span> low, <span class="dt">close =</span> close, </a>
<a class="sourceLine" id="cb42-6" data-line-number="6">               <span class="dt">group =</span> symbol)) <span class="op">+</span></a>
<a class="sourceLine" id="cb42-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_barchart</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb42-8" data-line-number="8"><span class="st">    </span><span class="kw">geom_bbands</span>(<span class="dt">ma_fun =</span> SMA, <span class="dt">sd =</span> <span class="dv">2</span>, <span class="dt">n =</span> <span class="dv">20</span>, <span class="dt">linetype =</span> <span class="dv">5</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb42-9" data-line-number="9"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"SHANK Bar Chart"</span>, </a>
<a class="sourceLine" id="cb42-10" data-line-number="10">         <span class="dt">subtitle =</span> <span class="st">"BBands with SMA Applied, Experimenting with Multiple Stocks"</span>, </a>
<a class="sourceLine" id="cb42-11" data-line-number="11">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-12" data-line-number="12"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(start, end)) <span class="op">+</span></a>
<a class="sourceLine" id="cb42-13" data-line-number="13"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>symbol, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">scales =</span> <span class="st">"free_y"</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-14" data-line-number="14"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-28-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
</div>
<div id="ggplot2-" class="section level2">
<h2 class="hasAnchor">
<a href="#ggplot2-" class="anchor"></a>ggplot2 함수</h2>
<p>기본 <code>ggplot2</code>는 재무 데이터를 분석하는데 유용한 많은 기능을 가지고 있습니다. 네이버(NVR)을 사용하여 몇 가지 간단한 예제를 살펴 보겠습니다.</p>
<div id="example-1-scale_y_log10---" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-scale_y_log10---" class="anchor"></a>Example 1 : scale_y_log10을 사용한 로그 스케일</h3>
<p><code>ggplot2</code>는 y 축을 로그 스케일로 스케일하기위한<code>scale_y_log10 ()</code>함수를 가지고 있습니다. 이는 분석 할 수있는 선형 추세를 조정하는 경향이 있으므로 매우 유용합니다.</p>
<p><strong>Continuous Scale</strong>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">NVR <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> adjusted)) <span class="op">+</span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="kw">palette_light</span>()[[<span class="dv">1</span>]]) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-4" data-line-number="4"><span class="st">    </span><span class="kw">scale_y_continuous</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb43-5" data-line-number="5"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Naver Line Chart"</span>, </a>
<a class="sourceLine" id="cb43-6" data-line-number="6">         <span class="dt">subtitle =</span> <span class="st">"Continuous Scale"</span>, </a>
<a class="sourceLine" id="cb43-7" data-line-number="7">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb43-8" data-line-number="8"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-29-1.png" width="95%" style="display: block; margin: auto;"></p>
<p><strong>Log Scale</strong>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">NVR <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> adjusted)) <span class="op">+</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="kw">palette_light</span>()[[<span class="dv">1</span>]]) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="st">    </span><span class="kw">scale_y_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb44-5" data-line-number="5"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Naver Line Chart"</span>, </a>
<a class="sourceLine" id="cb44-6" data-line-number="6">         <span class="dt">subtitle =</span> <span class="st">"Log Scale"</span>, </a>
<a class="sourceLine" id="cb44-7" data-line-number="7">         <span class="dt">y =</span> <span class="st">"Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-8" data-line-number="8"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-30-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="example-2-geom_smooth--" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-geom_smooth--" class="anchor"></a>Example 2: geom_smooth로 회귀 추세선</h3>
<p>우리는 워크 플로우에<code>geom_smooth ()</code>함수를 빠르게 추가하는 추세선을 적용 할 수 있습니다. 이 함수는 선형(<code>lm</code>)과 loess(<code>loess</code>) 를 포함한 몇 가지 예측 방법을 가지고 있습니다.</p>
<p><strong>Linear</strong>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">NVR <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> adjusted)) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">color =</span> <span class="kw">palette_light</span>()[[<span class="dv">1</span>]]) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb45-4" data-line-number="4"><span class="st">    </span><span class="kw">scale_y_log10</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb45-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"lm"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb45-6" data-line-number="6"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Naver Line Chart"</span>, </a>
<a class="sourceLine" id="cb45-7" data-line-number="7">         <span class="dt">subtitle =</span> <span class="st">"Log Scale, Applying Linear Trendline"</span>, </a>
<a class="sourceLine" id="cb45-8" data-line-number="8">         <span class="dt">y =</span> <span class="st">"Adjusted Closing Price"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb45-9" data-line-number="9"><span class="st">    </span><span class="kw">theme_tq</span>()</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-31-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
<div id="example-3-geom_segment--" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3-geom_segment--" class="anchor"></a>Example 3: geom_segment로 차트 볼륨</h3>
<p>우리는<code>geom_segment ()</code>함수를 사용하여 라인의 시작과 끝을 xy 점으로하는 일일 볼륨을 차트로 표시 할 수 있습니다. <code>aes()</code>를 사용하여 볼륨의 값을 기준으로 색상을 지정하여 이러한 데이터를 강조 표시합니다.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">NVR <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> volume)) <span class="op">+</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">xend =</span> date, <span class="dt">yend =</span> <span class="dv">0</span>, <span class="dt">color =</span> volume)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb46-5" data-line-number="5"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Naver Volume Chart"</span>, </a>
<a class="sourceLine" id="cb46-6" data-line-number="6">         <span class="dt">subtitle =</span> <span class="st">"Charting Daily Volume"</span>, </a>
<a class="sourceLine" id="cb46-7" data-line-number="7">         <span class="dt">y =</span> <span class="st">"Volume"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb46-8" data-line-number="8"><span class="st">    </span><span class="kw">theme_tq</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb46-9" data-line-number="9"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"none"</span>) </a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-32-1.png" width="95%" style="display: block; margin: auto;"></p>
<p>특정 지역을 확대 할 수 있습니다. <code>scale_color_gradient</code>를 사용하여 고점 및 저점을 빠르게 시각화 할 수 있으며<code>geom_smooth</code>를 사용하여 추세를 볼 수 있습니다.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">start &lt;-<span class="st"> </span>end <span class="op">-</span><span class="st"> </span><span class="kw">weeks</span>(<span class="dv">24</span>)</a>
<a class="sourceLine" id="cb47-2" data-line-number="2">NVR <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(date <span class="op">&gt;=</span><span class="st"> </span>start <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">50</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-4" data-line-number="4"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> volume)) <span class="op">+</span></a>
<a class="sourceLine" id="cb47-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_segment</span>(<span class="kw">aes</span>(<span class="dt">xend =</span> date, <span class="dt">yend =</span> <span class="dv">0</span>, <span class="dt">color =</span> volume)) <span class="op">+</span></a>
<a class="sourceLine" id="cb47-6" data-line-number="6"><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb47-7" data-line-number="7"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Naver Bar Chart"</span>, </a>
<a class="sourceLine" id="cb47-8" data-line-number="8">         <span class="dt">subtitle =</span> <span class="st">"Charting Daily Volume, Zooming In"</span>, </a>
<a class="sourceLine" id="cb47-9" data-line-number="9">         <span class="dt">y =</span> <span class="st">"Volume"</span>, <span class="dt">x =</span> <span class="st">""</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb47-10" data-line-number="10"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(start, end)) <span class="op">+</span></a>
<a class="sourceLine" id="cb47-11" data-line-number="11"><span class="st">    </span><span class="kw">scale_color_gradient</span>(<span class="dt">low =</span> <span class="st">"red"</span>, <span class="dt">high =</span> <span class="st">"darkblue"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb47-12" data-line-number="12"><span class="st">    </span><span class="kw">theme_tq</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb47-13" data-line-number="13"><span class="st">    </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">"none"</span>) </a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-33-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2>테마</h2>
<p><code>tidyquant</code> 패키지는 3 가지 테마로 구성되어있어 신속하게 재무 차트를 조정 할 수 있습니다.</p>
<ul>
<li>
<strong>Light</strong>: <code>theme_tq()</code> + <code>scale_color_tq()</code> + <code>scale_fill_tq()</code>
</li>
<li>
<strong>Dark</strong>: <code>theme_tq_dark()</code> + <code>scale_color_tq(theme = "dark")</code> + <code>scale_fill_tq(theme = "dark")</code>
</li>
<li>
<strong>Green</strong>: <code>theme_tq_green()</code> + <code>scale_color_tq(theme = "green")</code> + <code>scale_fill_tq(theme = "green")</code>
</li>
</ul>
</div>
<div id="dark" class="section level2">
<h2 class="hasAnchor">
<a href="#dark" class="anchor"></a>Dark</h2>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">n_mavg &lt;-<span class="st"> </span><span class="dv">50</span> <span class="co"># Number of periods (days) for moving average</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2">SHANK <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="st">    </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(date <span class="op">&gt;=</span><span class="st"> </span>start <span class="op">-</span><span class="st"> </span><span class="kw">days</span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>n_mavg)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x =</span> date, <span class="dt">y =</span> close, <span class="dt">color =</span> symbol)) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-5" data-line-number="5"><span class="st">    </span><span class="kw">geom_line</span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-6" data-line-number="6"><span class="st">    </span><span class="kw">geom_ma</span>(<span class="dt">n =</span> <span class="dv">15</span>, <span class="dt">color =</span> <span class="st">"darkblue"</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-7" data-line-number="7"><span class="st">    </span><span class="kw">geom_ma</span>(<span class="dt">n =</span> n_mavg, <span class="dt">color =</span> <span class="st">"red"</span>, <span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-8" data-line-number="8"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Dark Theme"</span>,</a>
<a class="sourceLine" id="cb48-9" data-line-number="9">         <span class="dt">x =</span> <span class="st">""</span>, <span class="dt">y =</span> <span class="st">"Closing Price"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-10" data-line-number="10"><span class="st">    </span><span class="kw">coord_x_date</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(start, end)) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-11" data-line-number="11"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span><span class="st"> </span>symbol, <span class="dt">scales =</span> <span class="st">"free_y"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb48-12" data-line-number="12"><span class="st">    </span><span class="kw">theme_tq_dark</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb48-13" data-line-number="13"><span class="st">    </span><span class="kw">scale_color_tq</span>(<span class="dt">theme =</span> <span class="st">"dark"</span>)</a></code></pre></div>
<p><img src="tqk-introduce_files/figure-html/unnamed-chunk-34-1.png" width="95%" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="NA">개요</a></li>
      <li>
<a href="#tidyquant------tidy">tidyquant 소개 - 주식 데이터를 tidy하게</a><ul class="nav nav-pills nav-stacked">
<li><a href="#--">주가 지수 가져오기</a></li>
      </ul>
</li>
      <li>
<a href="#tqk-------">tqk 소개 - 한국 주식 데이터 패키지</a><ul class="nav nav-pills nav-stacked">
<li><a href="#--">종목 코드 가져오기</a></li>
      <li><a href="#--">주식 데이터 가져오기</a></li>
      <li><a href="#tidyverse----">tidyverse와 함께 사용하는 시계열 데이터</a></li>
      <li><a href="#tq_---"><code>tq_</code>에서 계산 가능한 함수들</a></li>
      <li><a href="#ggplot2---">ggplot2와 연계된 차트 그리기</a></li>
      <li><a href="#-">차트 종류</a></li>
      <li><a href="#-">트랜드 시각화</a></li>
      <li><a href="#-">볼린저 밴드</a></li>
      <li><a href="#ggplot2-">ggplot2 함수</a></li>
      <li><a href="NA">테마</a></li>
      <li><a href="#dark">Dark</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Chanyub Park.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
